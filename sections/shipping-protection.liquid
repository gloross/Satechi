{%- assign _section  = section.settings -%}
{%- assign _blocks = section.blocks -%}
{%- assign featured_product = _section.featured_product -%}

{%- if featured_product -%}
  <section class="section-shipping-protection js-section-shipping-protection">
    <div class="section__inner">
      <header class="section__header">
        <h2 class="section__title">
          {{- _section.heading -}}
        </h2>
      </header>

      <div class="section__body">
        <div class="shipping-protection">
          <header class="shipping-protection__header">
            <div class="shipping-protection__checkbox">
              <input
              type="checkbox"
              name="{{ featured_product.title }}"
              id="{{ featured_product.id }}"
              quantity="1">

              <label
              for="{{ featured_product.id }}">
                {{- _section.text -}}
              </label>
            </div>
          </header>

          <div class="shipping-protection__body">
            <div class="shipping-protection__icon"></div>

            {%- if _blocks.size > 0 -%}
              <div class="shipping-protection__features">
                <ul>
                  {%- for block in _blocks -%}
                    {%- assign _block = block.settings -%}

                    <li>
                      {{- _block.text -}}
                    </li>
                  {%- endfor -%}
                </ul>
              </div>
            {%- endif -%}
          </div>
        </div>
      </div>
    </div>
  </section>
{%- endif -%}


{% schema %}
  {
    "name": "Shipping Protection",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Shipping Protection"
      },
      {
        "type": "product",
        "id": "featured_product",
        "label": "Product"
      },
      {
        "type": "textarea",
        "id": "text",
        "label": "Text",
        "default": "Click the checkbox to protect your package"
      }
    ],
    "blocks": [
      {
        "type": "item",
        "name": "Item",
        "settings": [
          {
            "type": "text",
            "id": "text",
            "label": "Text"
          }
        ]
      }
    ]
  }
{% endschema %}
